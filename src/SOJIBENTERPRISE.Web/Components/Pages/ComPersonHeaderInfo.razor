@using SOJIBENTERPRISE.DataAccess
@using SOJIBENTERPRISE.Domain
@inject IServiceScopeFactory ScopeFactory;

<!-- Client Header -->
<div class="card shadow-sm readOnlySection m-0">
    <div class="row m-3">
        <div class="col-md-8">
            <h3>@PersonInfo.Name</h3>
        </div>
        <div class="col-md-12">
            <strong>Address : </strong><span>@PersonInfo.FullAddress</span>
            <strong>Phone : </strong><span>@PersonInfo.PhoneNumbers</span>
            <strong>Email : </strong><span>@PersonInfo.Email</span>
        </div>
    </div>
</div>

@code {
    [Parameter]
    public int Id { get; set; }

    [Inject]
    private IOrder m_Order { get; set; }

    private PersonInfoDTO PersonInfo { get; set; } = new PersonInfoDTO();

    protected override void OnParametersSet()
    {
        using (var scope = ScopeFactory.CreateScope())
        {
            var order = scope.ServiceProvider.GetRequiredService<IOrder>();
            PersonInfo = order.GetPersonInfo(Id);
        }
        
    }
}